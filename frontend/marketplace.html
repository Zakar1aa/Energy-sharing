<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Energy Marketplace</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body { font-family: sans-serif; max-width: 800px; margin: 2rem auto; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
    th, td { padding: 0.5rem; border: 1px solid #ccc; text-align: left; }
    form { margin-bottom: 2rem; }
    label { display: block; margin-top: 0.5rem; }
    input, button, select { padding: 0.5rem; margin-top: 0.25rem; width: 100%; }
    button { margin-top: 1rem; }
    .feedback { margin-top: 0.5rem; font-size: 0.9em; color: green; }
    .error { color: red; }
    pre { background: #f9f9f9; padding: 1rem; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>⚡ Energy Marketplace</h1>

  <!-- Balances -->
  <section>
    <h2>Prosumer Balances</h2>
    <table>
      <thead>
        <tr><th>Address</th><th>Balance (kWh)</th></tr>
      </thead>
      <tbody id="balances"></tbody>
    </table>
    <button id="refreshBalances">Refresh</button>
    <div id="balancesFeedback" class="feedback"></div>
  </section>

  <!-- Produce Energy -->
  <section>
    <h2>Produce Energy</h2>
    <form id="produceForm">
      <label for="produceProsumer">Prosumer</label>
      <select id="produceProsumer"></select>
      <label for="produceAmount">Amount (kWh)</label>
      <input type="number" step="0.01" id="produceAmount" required />
      <button type="submit">Produce</button>
      <div id="produceFeedback" class="feedback"></div>
    </form>
  </section>

  <!-- Transfer Energy -->
  <section>
    <h2>Transfer Energy</h2>
    <form id="transferForm">
      <label for="fromProsumer">From</label>
      <select id="fromProsumer"></select>
      <label for="toAddress">To Address</label>
      <input type="text" id="toAddress" placeholder="0x…" required />
      <label for="transferAmount">Amount (kWh)</label>
      <input type="number" step="0.01" id="transferAmount" required />
      <button type="submit">Transfer</button>
      <div id="transferFeedback" class="feedback"></div>
    </form>
  </section>

  <!-- Sell Order -->
  <section>
    <h2>Submit Sell Order</h2>
    <form id="sellForm">
      <label for="sellProsumer">Prosumer</label>
      <select id="sellProsumer"></select>
      <label for="sellQty">Quantity (kWh)</label>
      <input type="number" step="0.01" id="sellQty" required />
      <label for="sellPrice">Min Price (€/kWh)</label>
      <input type="number" step="0.0001" id="sellPrice" required />
      <button type="submit">Submit Sell Order</button>
      <div id="sellFeedback" class="feedback"></div>
    </form>
  </section>

  <!-- Buy Order -->
  <section>
    <h2>Submit Buy Order</h2>
    <form id="buyForm">
      <label for="buyProsumer">Prosumer</label>
      <select id="buyProsumer"></select>
      <label for="buyQty">Quantity (kWh)</label>
      <input type="number" step="0.01" id="buyQty" required />
      <label for="buyPrice">Max Price (€/kWh)</label>
      <input type="number" step="0.0001" id="buyPrice" required />
      <button type="submit">Submit Buy Order</button>
      <div id="buyFeedback" class="feedback"></div>
    </form>
  </section>

  <!-- Order Book -->
  <section>
    <h2>Current Order Book</h2>
    <button id="refreshBook">Refresh Book</button>
    <pre id="orderBook"></pre>
  </section>

  <!-- Match History -->
  <section>
    <h2>Last Matches</h2>
    <button id="refreshHistory">Refresh History</button>
    <pre id="matchHistory"></pre>
  </section>

  <script src="marketplace.js"></script>
</body>
</html>
